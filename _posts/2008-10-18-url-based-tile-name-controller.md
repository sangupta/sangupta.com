---
layout: default
title: Url based Tile name Controller
permalink: /2008/10/url-based-tile-name-controller.html
redirect_from: "/2008/10/url-based-tile-name-controller.html"
date: Sat Oct 18 22:27:00 IST 2008
sharingURL: http://blog.sangupta.com/2008/10/url-based-tile-name-controller.html
tags: coding-techniques java spring-framework web
---
<p align="justify">Tiles, a framework that is used extensively for templating in Java based web applications. Spring Framework, a dependency injection container that makes configuration easier. There are several controllers available in the Spring framework which makes mapping static JSP/JSF pages directly to the URI's without writing boiler plate code. But in most of the cases, we use Tiles for a templating. What to do in such a case? There is no single controller that would help us map URI's to a tilename. Here is what I came up... A simple controller that would directly map a URI to a tilename and forward the request out.<br><br>A typical usage example is as under,</p>
<pre class="brush: xml">&lt;bean name="urlTilenameController" class="org.springframework.web.servlet.mvc.UrlTilenameViewController" &gt;  <br>&lt;property name="indexTile" value=".homePage" /&gt;  <br>&lt;property name="toLowercase" value="true" /&gt;  <br>&lt;property name="stripAfterLastDot" value="true" /&gt;  <br>&lt;property name="insertStartingDot" value="true" /&gt;<br>&lt;/bean&gt;<br></pre>The parameters should be self explanatory. In case you would like to know more on this, feel free to contact me. 
<br>
<br>Hope this helps. 
<i>Keep Walking!</i>
<pre class="brush: java">package org.springframework.web.servlet.mvc;<br><br>import java.io.File;<br><br>import javax.servlet.ServletContext;<br>import javax.servlet.http.HttpServletRequest;<br><br>import org.apache.commons.logging.Log;<br>import org.apache.commons.logging.LogFactory;<br><br>/**<br>* TODO: type comment.<br>*<br>* @author Sandeep on Sep 25, 2008 @ 9:29:54 PM<br>*<br>*/<br>public class UrlTilenameViewController extends AbstractUrlViewController  {<br><br>private static final Log log = LogFactory.getLog(UrlTilenameViewController.class);<br><br>private String indexTile;<br><br>private boolean toLowercase;<br><br>private boolean stripAfterLastDot;<br><br>private boolean insertStartingDot;<br><br>/**<br>* @param request<br>* @return<br>* @see org.springframework.web.servlet.mvc.AbstractUrlViewController#getViewNameForRequest(javax.servlet.http.HttpServletRequest)<br>*/<br>@Override<br>protected String getViewNameForRequest(HttpServletRequest request) {<br>String uri = extractOperableUrl(request);<br>String tileName = getViewNameForUrlPath(uri);<br><br>if(log.isDebugEnabled()) {<br>log.debug("uri " + uri + " converted to tilename " + tileName);<br>}<br><br>return tileName;<br>}<br><br>protected String extractOperableUrl(HttpServletRequest request) {<br>String uri = request.getRequestURI();<br>ServletContext context = request.getSession().getServletContext();<br>File rootFile = new File(context.getRealPath ("/"));<br>String rootContext = rootFile.getName() + "/";<br><br>if(log.isDebugEnabled()) {<br>log.debug("Request uri received is " + uri + " in the application context " + rootContext);<br>}<br><br>if(uri.startsWith("/")) {<br>uri = uri.substring(1);<br>}<br>if(uri.startsWith(rootContext)) {<br>uri = uri.substring(rootContext.length());<br>}<br><br>return uri;<br>}<br><br>protected String getViewNameForUrlPath(String uri) {<br>if(uri == null || "".equals(uri)) {<br>return this.indexTile;<br>}<br>uri = uri.replaceAll("/", ".");<br>if(this.toLowercase) {<br>uri = uri.toLowerCase();<br>}<br>if(this.stripAfterLastDot) {<br>int index = uri.lastIndexOf(".");<br>if(index != -1) {<br>uri = uri.substring(0, index);<br>}<br>}<br>if(this.insertStartingDot) {<br>uri = "." + uri;<br>}<br>return uri;<br>}<br><br>/** Returns the indexTile.<br>* @return the indexTile.<br>*/<br>public String getIndexTile() {<br>return indexTile;<br>}<br><br>/** Sets the indexTile to the specified value.<br>* @param indexTile indexTile to set.<br>*/<br>public void setIndexTile(String indexTile) {<br>this.indexTile = indexTile;<br>}<br><br>/** Returns the toLowercase.<br>* @return the toLowercase.<br>*/<br>public boolean isToLowercase() {<br>return toLowercase;<br>}<br><br>/** Sets the toLowercase to the specified value.<br>* @param toLowercase toLowercase to set.<br>*/<br>public void setToLowercase(boolean toLowercase) {<br>this.toLowercase = toLowercase;<br>}<br><br>/** Returns the stripAfterLastDot.<br>* @return the stripAfterLastDot.<br>*/<br>public boolean isStripAfterLastDot() {<br>return stripAfterLastDot;<br>}<br><br>/** Sets the stripAfterLastDot to the specified value.<br>* @param stripAfterLastDot stripAfterLastDot to set.<br>*/<br>public void setStripAfterLastDot(boolean stripAfterLastDot) {<br>this.stripAfterLastDot = stripAfterLastDot;<br>}<br><br>/** Returns the insertStartingDot.<br>* @return the insertStartingDot.<br>*/<br>public boolean isInsertStartingDot() {<br>return insertStartingDot;<br>}<br><br>/** Sets the insertStartingDot to the specified value.<br>* @param insertStartingDot insertStartingDot to set.<br>*/<br>public void setInsertStartingDot(boolean insertStartingDot) {<br>this.insertStartingDot = insertStartingDot;<br>}<br>}</pre>
<p></p>
